<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EE 367 Lab 7: src/sockets.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">EE 367 Lab 7
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">sockets.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Provides functions for creating server and client sockets, sending and receiving packets in a C networking program.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;arpa/inet.h&gt;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;netdb.h&gt;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;sys/socket.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &quot;<a class="el" href="host_8h_source.html">host.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="main_8h_source.html">main.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="net_8h_source.html">net.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sockets_8h_source.html">sockets.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a00e3cf7960681f2888aacd8fb3639266"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sockets_8c.html#a00e3cf7960681f2888aacd8fb3639266">send_packet</a> (int pipe_fd, struct <a class="el" href="structpacket.html">packet</a> *p)</td></tr>
<tr class="memdesc:a00e3cf7960681f2888aacd8fb3639266"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a packet by writing its message format to the given pipe.  <br /></td></tr>
<tr class="separator:a00e3cf7960681f2888aacd8fb3639266"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a428e2e73d20e902b21d84e19cd231016"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sockets_8c.html#a428e2e73d20e902b21d84e19cd231016">receive_packet</a> (int pipe_fd, struct <a class="el" href="structpacket.html">packet</a> *p)</td></tr>
<tr class="memdesc:a428e2e73d20e902b21d84e19cd231016"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receives a packet by reading its message format from the given pipe.  <br /></td></tr>
<tr class="separator:a428e2e73d20e902b21d84e19cd231016"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac682607ad77ec7cfeda376a8bf15dc99"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sockets_8c.html#ac682607ad77ec7cfeda376a8bf15dc99">create_server</a> (int port, int pipe_fd)</td></tr>
<tr class="memdesc:ac682607ad77ec7cfeda376a8bf15dc99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a server socket, listens for incoming connections and forwards received data to a pipe.  <br /></td></tr>
<tr class="separator:ac682607ad77ec7cfeda376a8bf15dc99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5180eae33365fe64d3591720fe0f424"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sockets_8c.html#aa5180eae33365fe64d3591720fe0f424">create_client</a> (char *domain_name, int port, struct <a class="el" href="structpacket.html">packet</a> *p)</td></tr>
<tr class="memdesc:aa5180eae33365fe64d3591720fe0f424"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a client socket, connects to a remote server, and sends a packet.  <br /></td></tr>
<tr class="separator:aa5180eae33365fe64d3591720fe0f424"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Provides functions for creating server and client sockets, sending and receiving packets in a C networking program. </p>
<p>This file contains functions for handling sockets in a C networking program, including:</p>
<ul>
<li>Creating a server socket, which listens for incoming connections and forwards received data to a pipe. </li>
<li>Creating a client socket, which connects to a remote server and sends packets. </li>
<li>Sending a packet, which involves converting the packet to a message format and writing the message to a pipe or socket. </li>
<li>Receiving a packet, which involves reading a message from a pipe or socket and converting it to a packet format.</li>
</ul>
<p>The server socket is created as a child process in the <a class="el" href="switch_8c.html" title="Main program for managing network port communication, forwarding table, and packet handling.">switch.c</a> file, specifically in the <a class="el" href="switch_8c.html#ac56485197b10f5021cedeaae9feec56c">switch_main(int host_id)</a> function.</p>
<p>This child process listens for incoming connections, reads data from the clients, and sends the data to the pipe for further</p>
<p>processing by the parent process.</p>
<p>The client socket is used to connect to a remote server and send packets, such as when forwarding packets to their destinations in a network. The client socket is set to non-blocking mode to allow for asynchronous communication. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="aa5180eae33365fe64d3591720fe0f424" name="aa5180eae33365fe64d3591720fe0f424"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5180eae33365fe64d3591720fe0f424">&#9670;&#160;</a></span>create_client()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void create_client </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>domain_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structpacket.html">packet</a> *&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a client socket, connects to a remote server, and sends a packet. </p>
<p>This function creates a client socket, resolves the domain name to an IP address, and connects to the remote server at the specified port. It sets the socket to non-blocking mode for asynchronous communication and sends the given packet to the server.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">domain_name</td><td>The domain name of the remote server to connect to. </td></tr>
    <tr><td class="paramname">port</td><td>The port number of the remote server. </td></tr>
    <tr><td class="paramname">p</td><td>Pointer to the packet structure to be sent. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac682607ad77ec7cfeda376a8bf15dc99" name="ac682607ad77ec7cfeda376a8bf15dc99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac682607ad77ec7cfeda376a8bf15dc99">&#9670;&#160;</a></span>create_server()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void create_server </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pipe_fd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a server socket, listens for incoming connections and forwards received data to a pipe. </p>
<p>This function creates a server socket, binds it to the specified port, and listens for incoming connections. It accepts connections, reads data from the clients, and sends the data to the specified pipe file descriptor for further processing.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>The port number on which the server socket will listen for incoming connections. </td></tr>
    <tr><td class="paramname">pipe_fd</td><td>The file descriptor of the pipe to write the received data to. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a428e2e73d20e902b21d84e19cd231016" name="a428e2e73d20e902b21d84e19cd231016"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a428e2e73d20e902b21d84e19cd231016">&#9670;&#160;</a></span>receive_packet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int receive_packet </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pipe_fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structpacket.html">packet</a> *&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receives a packet by reading its message format from the given pipe. </p>
<p>This function reads a message from the specified pipe file descriptor and converts it to a packet format. It returns the number of bytes read from the pipe.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pipe_fd</td><td>The file descriptor of the pipe to read the message from. </td></tr>
    <tr><td class="paramname">p</td><td>Pointer to the packet structure that will store the received packet data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes read from the pipe. </dd></dl>

</div>
</div>
<a id="a00e3cf7960681f2888aacd8fb3639266" name="a00e3cf7960681f2888aacd8fb3639266"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00e3cf7960681f2888aacd8fb3639266">&#9670;&#160;</a></span>send_packet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void send_packet </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pipe_fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structpacket.html">packet</a> *&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends a packet by writing its message format to the given pipe. </p>
<p>This function converts the given packet to a message format and writes the message to the specified pipe file descriptor.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pipe_fd</td><td>The file descriptor of the pipe to write the message to. </td></tr>
    <tr><td class="paramname">p</td><td>Pointer to the packet structure to be sent. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
